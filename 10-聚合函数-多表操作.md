聚合函数

最大值属于哪个手机，子查询后续讲

一般写 COUNT(*) 来计算数目。

后面讲聚合函数直接转对象，数组。

---

GROUP BY

一般都会和聚合函数一起使用。

保留几位小数的函数 ROUND



GROUP BY 的约束条件

通常 HAVING 和 GROUP BY 一起使用。

---

多张表

为品牌单独创建一张表。

插入模拟数据，并非完全对应的关系。

创建外键约束

- 创建表时；
- 修改以创建表时。

验证是否已经添加了外键。

- 设计表。
- 保存一个不符合外键约束的值。



在原 products 表上，更新 brand 为字段 brand_id 设置外键。

vivo，oppo，锤子没设置对应 id，开发中要处理这样的情况。



外键的修改和删除。

默认不能修改。

如何进行更新？

- RESTIRCT MySQL 的标准
- NO ACTION 社区 SQL 的标准。（MySQL 也支持）
- CASCADE：用的最多。



查看表 products 中的外键。

SHOW CREATE TABLE products

找到外键，

删除外键。

重新添加外键，如：ON UPDATA CASCADE

---

多表查询

默认多表查询的结果。

使用 WHERE 查询条件，对结果进行过滤。

- 但是过滤后，部分数据丢失了，因为只能过滤满出足条件的数据。原表中部分数据丢失了。

---

多表表连

左连接（常用）

查询没有交集的数据。

WHERE brandid IS NULL



右链接

用的不多。

展示没有交际的数据



内连接（常用）

[CROSS/INNER] JOIN

去掉了为空的数据，只保留了

两条 SQL 的对比。



全连接

MYSQL 不支持全连接，需要使用 UNION

---

多对多关系

通常会建立一张关系表。这也可以看作是一个分层架构。



数据准备

创建关系表。建立外键联系。



查询数据

所有有选课学生的选课情况（内连接）

所有的学生（不管有没有选课）的选课情况（内连接）

单个学生的选课情况。

- 内连接，没有选课的学生选不出来，所以要用左连接

查看哪些学生没有选课。

查看哪些课程没有被选择。