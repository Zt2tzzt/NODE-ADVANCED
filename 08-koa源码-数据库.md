# 一、Koa 源码分析


Koa 导出的是一个类，名为 Application；，用它可创建出实例 app。

中间件会保存在 this.middleware 中；每一个添加的中间件，都被 push 到其中。

执行 app.listen 方法，传入的是 this.callback() 的返回值。

在 handleRequest 函数中，定义了 onerror，handleResponse，在返回的 Promise 后，.then(handleResponse).catch(onerror)

执行 next 函数，本质上是在执行 dispatch 函数。

dispatch 会返回一个 Promise

# 二、数据库的概念

数据库与后端开发，就像 redux 与 react 框架的关系。

所有的开发，不管是前端，后端，大数据，人工智能...都是对数据的处理。

## 1.为什么需要

任何的软件系统，都需要存放大量的数据，这些数据通常是非常复杂和庞大的：

- 比如用户信息包括姓名、年龄、性别、地址、身份证号、出生日期等等；
- 比如商品信息包括商品的名称、描述、价格（原价）、分类标签、商品图片等等；
- 比如歌曲信息包括歌曲的名称、歌手、专辑、歌曲时长、歌词信息、封面图片等等；

那么这些信息，不能直接存储到文件中吗？可以，但是文件系统有很多的缺点：

- 很难以合适的方式组织数据（数据库中，多张表之前的关系合理组织）；
- 对数据进行增删改查中的复杂操作，并且保证单操作的**原子性**（不能同时被修改）；
- 如果一个数据库，需要为多个程序服务，很难进行数据共享；
- 需要考虑如何进行数据的高效备份、迁移、恢复；
- 等等...

## 2.是什么

数据库通俗来讲就是一个存储数据的仓库，数据库本质上就是一个软件、一个程序。

# 三、常见的数据库

通常我们将数据划分成两类：关系型数据库和非关系型数据库； 
关系型数据库：MySQL、Oracle、DB2、SQL Server、Postgre SQL等； 
- 关系型数据库通常我们会创建很多个二维数据表； 
- 数据表之间相互关联起来，形成一对一、一对多、多对多等关系； 
- 之后可以利用SQL语句在多张表中查询我们所需的数据；

非关系型数据库：MongoDB、Redis、Memcached、HBse等； 
- 非关系型数据库的英文其实是Not only SQL，也简称为NoSQL； 
- 相当而言非关系型数据库比较简单一些，存储数据也会更加自由（甚至我们可以直接将一个复杂的json对象直接塞入到数据 库中）；
- NoSQL是基于Key-Value的对应关系，并且查询的过程中不需要经过SQL解析；

如何在开发中选择他们呢？具体的选择会根据不同的项目进行综合的分析，我这里给一点点建议： 
- 目前在公司进行后端开发（Node、Java、Go等），还是以关系型数据库为主；
- 比较常用的用到非关系型数据库的，在爬取大量的数据进行存储时，会比较常见；





有哪些类型？

非关系型数据库，更准确的说，应该是“不仅仅是关系型数据库”

非关系型数据库，相较于关系型数据库

- 存储的形式随意简单。
- 不好进行精确地细化地操作。
- 通常会有大量冗余信息。

一般在爬取数据，或收集大量无固定结构的数据时，会使用非关系型数据库。

---

MySQL 是什么？

数据组织方式

---

下载 MySQL

下载安装版本，不用自行配置。

- 默认撞见了一个名为 root 的用户。
- 自行配置该用户的密码。

安装完成后，带开 MySQL 命令行工具。输入配置的密码，即可连接到 MySQL.

如果想要在全局命令行，使用 MySQL，配置环境变量。

---

终端连接数据库。

---

显示数据库

show databases

显示的四张表，分别代表什么意思？

information_schema
mysql

performance_schema

sys

---

终端操作数据库

create database music_db 创建一个数据库

> MySQL 命令，只要不写分号，就可以换行。

---

GUI 工具介绍

在 navicat 中，连接赎救苦。

---

SQL 语句是什么？

SQL 语句分裂。

---

DDL 语句

查看当前数据库。

对数据库的创建，删除，修改

在 Navicat 中，在连接的数据库中，选择一个数据库，新建查询。

将写下的 SQL 语句，保存一个 .sql 文件；



创建数据库

创建一个已存在的数据库，会报错，使用更安全的命令。

一般使用默认编码即可。



删除数据库

删除一个不存在的数据库，会报错，使用更安全的命令。



修改数据库

可修改编码，但一般使用默认的。

